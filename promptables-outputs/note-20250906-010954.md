# AI Coder App Prompt: DIFY Trello Upload Plugin

I want to build a custom plugin for the DIFY platform that enables automated uploading of AI-generated outputs as tasks directly to Trello boards. This plugin should streamline workflow automation by creating seamless integration between AI content generation and project management systems.

## Project Name:
DIFY Trello Upload Plugin

## Target Audience:
• DIFY platform users who manage projects in Trello
• Development teams using AI workflows for task generation
• Project managers integrating AI outputs into their boards

## Core Features and Functionality:

### Plugin Structure (Following DIFY Standards)
• Create proper directory structure with _assets, provider, tools, and utils folders
• Provider configuration with credential validation for Trello API
• Tool implementation for card creation functionality
• Proper YAML configuration files for metadata and parameters

### Main Tool Functionality
• Accept AI-generated output with title and content
• Allow user to specify target Trello board ID and list ID
• Create Trello card with AI output title as card title
• Use AI output content as card description (truncated if exceeds limits)
• Optional fields for labels, due dates, and assignments
• Manual execution trigger (user runs when needed)

### Input Parameters
• Card Title: String (from AI output)
• Card Description: Text content (AI output, auto-truncated)
• Board ID: Required string (Trello board identifier)
• List ID: Required string (Trello list identifier)
• Labels: Optional array of label names
• Due Date: Optional date field
• Assignee: Optional Trello member ID

### Credential Management
• Secure storage of Trello API key and token using DIFY's credential system
• Credential validation with test API call during setup
• Never hardcode API credentials in source code

## Tech Stack (Recommended Defaults):
• Language: Python 3.8+
• HTTP Client: requests library for Trello API calls
• Framework: DIFY plugin architecture
• API Integration: Trello REST API v1
• Authentication: Trello API key and token
• Error Handling: Comprehensive try-catch with meaningful messages

## Implementation Requirements:

### Provider Configuration (provider.yaml)
• Plugin metadata including name, version, description
• Credential schema for API key and token fields
• Proper field validation and security settings

### Provider Validation (provider.py)
• Inherit from base provider class
• Implement validate_credentials method
• Test API connectivity with simple Trello API call
• Return clear error messages for invalid credentials

### Tool Configuration (tool.yaml)
• Define all input parameters with proper types
• Set validation rules and default values
• Include clear parameter descriptions
• Specify required vs optional fields

### Core Tool Logic (tool.py)
• Inherit from base tool class
• Implement _invoke method with main functionality
• Make HTTP POST to Trello cards endpoint
• Handle API responses and format success messages
• Implement content truncation for long descriptions

### Error Handling & Validation
• Validate board ID and list ID formats
• Check content length limits (10,000 characters for descriptions)
• Handle network timeouts and API failures gracefully
• Implement retry logic for transient failures
• Sanitize input content for special characters

### Rate Limiting Compliance
• Respect Trello's 300 requests per 10 seconds limit
• Implement exponential backoff for rate limit errors
• Add appropriate delays between requests if needed

## Plugin Assets:
• Create plugin icons in _assets directory
• Design icons representing DIFY-Trello integration
• Include both light and dark theme variants
• Optimize file sizes for fast loading

## Testing & Quality Assurance:
• Test successful card creation scenarios
• Test error cases (invalid credentials, wrong IDs, API failures)
• Verify content truncation works properly
• Test with various input content types and sizes
• Validate plugin loads correctly in DIFY interface

## Documentation Requirements:
• README with setup and usage instructions
• Configuration guide for finding Trello board/list IDs
• Troubleshooting section for common issues
• API rate limiting guidelines for users
• Character limit documentation

## Security Considerations:
• Use DIFY's secure credential storage
• Validate all user inputs before API calls
• Implement proper error messages without exposing sensitive data
• Follow DIFY security best practices for plugin development

## Success Criteria:
• Plugin loads successfully in DIFY interface
• Users can configure Trello credentials securely
• AI outputs are successfully converted to Trello cards
• Error handling provides clear, actionable feedback
• Plugin respects Trello API rate limits and best practices